(function(f){function r(l,r){return f.map(l,function(f){return f+".touchspin_"+r})}var l=0;f.fn.TouchSpin=function(w){if("destroy"===w)this.each(function(){var l=f(this).data();f(document).off(r("mouseup touchend touchcancel mousemove touchmove scroll scrollstart".split(" "),l.spinnerid).join(" "))});else{var C={min:0,max:100,initval:"",replacementval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,verticalbuttons:!1,verticalupclass:"fa fa-chevron-up",verticaldownclass:"fa fa-chevron-down",
prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0,buttondown_class:"btn btn-secondary",buttonup_class:"btn btn-secondary",buttondown_txt:"-",buttonup_txt:"+"},D={min:"min",max:"max",initval:"init-val",replacementval:"replacement-val",step:"step",decimals:"decimals",stepinterval:"step-interval",verticalbuttons:"vertical-buttons",verticalupclass:"vertical-up-class",verticaldownclass:"vertical-down-class",forcestepdivisibility:"force-step-divisibility",
stepintervaldelay:"step-interval-delay",prefix:"prefix",postfix:"postfix",prefix_extraclass:"prefix-extra-class",postfix_extraclass:"postfix-extra-class",booster:"booster",boostat:"boostat",maxboostedstep:"max-boosted-step",mousewheel:"mouse-wheel",buttondown_class:"button-down-class",buttonup_class:"button-up-class",buttondown_txt:"button-down-txt",buttonup_txt:"button-up-txt"};return this.each(function(){function E(){var a={};f.each(D,function(b,d){var k="bts-"+d;c.is("[data-"+k+"]")&&(a[b]=c.data(k))});
return a}function F(a){switch(b.forcestepdivisibility){case "round":return(Math.round(a/b.step)*b.step).toFixed(b.decimals);case "floor":return(Math.floor(a/b.step)*b.step).toFixed(b.decimals);case "ceil":return(Math.ceil(a/b.step)*b.step).toFixed(b.decimals);default:return a}}function t(){var a=c.val();if(""===a)""!==b.replacementval&&(c.val(b.replacementval),c.trigger("change"));else if(!(0<b.decimals&&"."===a)){var k=parseFloat(a);isNaN(k)&&(k=""!==b.replacementval?b.replacementval:0);var d=k;
k.toString()!==a&&(d=k);k<b.min&&(d=b.min);k>b.max&&(d=b.max);d=F(d);Number(a).toString()!==d.toString()&&(c.val(d),c.trigger("change"))}}function x(){if(b.booster){var a=Math.pow(2,Math.floor(q/b.boostat))*b.step;b.maxboostedstep&&a>b.maxboostedstep&&(a=b.maxboostedstep,e=Math.round(e/a)*a);return Math.max(b.step,a)}return b.step}function n(){t();e=parseFloat(d.input.val());isNaN(e)&&(e=0);var a=e,k=x();e+=k;e>b.max&&(e=b.max,c.trigger("touchspin.on.max"),g());d.input.val(Number(e).toFixed(b.decimals));
a!==e&&c.trigger("change")}function p(){t();e=parseFloat(d.input.val());isNaN(e)&&(e=0);var a=e,k=x();e-=k;e<b.min&&(e=b.min,c.trigger("touchspin.on.min"),g());d.input.val(e.toFixed(b.decimals));a!==e&&c.trigger("change")}function u(){g();q=0;h="down";c.trigger("touchspin.on.startspin");c.trigger("touchspin.on.startdownspin");y=setTimeout(function(){z=setInterval(function(){q++;p()},b.stepinterval)},b.stepintervaldelay)}function v(){g();q=0;h="up";c.trigger("touchspin.on.startspin");c.trigger("touchspin.on.startupspin");
A=setTimeout(function(){B=setInterval(function(){q++;n()},b.stepinterval)},b.stepintervaldelay)}function g(){clearTimeout(y);clearTimeout(A);clearInterval(z);clearInterval(B);switch(h){case "up":c.trigger("touchspin.on.stopupspin");c.trigger("touchspin.on.stopspin");break;case "down":c.trigger("touchspin.on.stopdownspin"),c.trigger("touchspin.on.stopspin")}q=0;h=!1}var c=f(this),G=c.data(),m,e,z,B,y,A,q=0,h=!1;if(!c.data("alreadyinitialized"))if(c.data("alreadyinitialized",!0),l+=1,c.data("spinnerid",
l),c.is("input")){var b=f.extend({},C,G,E(),w);""!==b.initval&&""===c.val()&&c.val(b.initval);t();(function(){var a=c.val(),d=c.parent();""!==a&&(a=Number(a).toFixed(b.decimals));c.data("initvalue",a).val(a);c.addClass("form-control");if(d.hasClass("input-group")){d.addClass("bootstrap-touchspin");var e=c.prev();a=c.next();var g='<span class="input-group-addon bootstrap-touchspin-prefix">'+b.prefix+"</span>",h='<span class="input-group-addon bootstrap-touchspin-postfix">'+b.postfix+"</span>";if(e.hasClass("input-group-btn")){var l=
'<button class="'+b.buttondown_class+' bootstrap-touchspin-down" type="button">'+b.buttondown_txt+"</button>";e.append(l)}else l='<span class="input-group-btn"><button class="'+b.buttondown_class+' bootstrap-touchspin-down" type="button">'+b.buttondown_txt+"</button></span>",f(l).insertBefore(c);a.hasClass("input-group-btn")?(e='<button class="'+b.buttonup_class+' bootstrap-touchspin-up" type="button">'+b.buttonup_txt+"</button>",a.prepend(e)):(e='<span class="input-group-btn"><button class="'+b.buttonup_class+
' bootstrap-touchspin-up" type="button">'+b.buttonup_txt+"</button></span>",f(e).insertAfter(c));f(g).insertBefore(c);f(h).insertAfter(c);m=d}else m=f(b.verticalbuttons?'<div class="input-group bootstrap-touchspin"><span class="input-group-addon bootstrap-touchspin-prefix">'+b.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+b.postfix+'</span><span class="input-group-btn-vertical"><button class="'+b.buttondown_class+' bootstrap-touchspin-up" type="button"><i class="'+b.verticalupclass+
'"></i></button><button class="'+b.buttonup_class+' bootstrap-touchspin-down" type="button"><i class="'+b.verticaldownclass+'"></i></button></span></div>':'<div class="input-group bootstrap-touchspin"><span class="input-group-btn"><button class="'+b.buttondown_class+' bootstrap-touchspin-down" type="button">'+b.buttondown_txt+'</button></span><span class="input-group-addon bootstrap-touchspin-prefix">'+b.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+b.postfix+'</span><span class="input-group-btn"><button class="'+
b.buttonup_class+' bootstrap-touchspin-up" type="button">'+b.buttonup_txt+"</button></span></div>").insertBefore(c),f(".bootstrap-touchspin-prefix",m).after(c),c.hasClass("input-sm")?m.addClass("input-group-sm"):c.hasClass("input-lg")&&m.addClass("input-group-lg")})();var d={down:f(".bootstrap-touchspin-down",m),up:f(".bootstrap-touchspin-up",m),input:f("input",m),prefix:f(".bootstrap-touchspin-prefix",m).addClass(b.prefix_extraclass),postfix:f(".bootstrap-touchspin-postfix",m).addClass(b.postfix_extraclass)};
""===b.prefix&&d.prefix.hide();""===b.postfix&&d.postfix.hide();(function(){c.on("keydown",function(a){var b=a.keyCode||a.which;38===b?("up"!==h&&(n(),v()),a.preventDefault()):40===b&&("down"!==h&&(p(),u()),a.preventDefault())});c.on("keyup",function(a){a=a.keyCode||a.which;38===a?g():40===a&&g()});c.on("blur",function(){t()});d.down.on("keydown",function(a){var b=a.keyCode||a.which;if(32===b||13===b)"down"!==h&&(p(),u()),a.preventDefault()});d.down.on("keyup",function(a){a=a.keyCode||a.which;32!==
a&&13!==a||g()});d.up.on("keydown",function(a){var b=a.keyCode||a.which;if(32===b||13===b)"up"!==h&&(n(),v()),a.preventDefault()});d.up.on("keyup",function(a){a=a.keyCode||a.which;32!==a&&13!==a||g()});d.down.on("mousedown.touchspin",function(a){d.down.off("touchstart.touchspin");c.is(":disabled")||(p(),u(),a.preventDefault(),a.stopPropagation())});d.down.on("touchstart.touchspin",function(a){d.down.off("mousedown.touchspin");c.is(":disabled")||(p(),u(),a.preventDefault(),a.stopPropagation())});d.up.on("mousedown.touchspin",
function(a){d.up.off("touchstart.touchspin");c.is(":disabled")||(n(),v(),a.preventDefault(),a.stopPropagation())});d.up.on("touchstart.touchspin",function(a){d.up.off("mousedown.touchspin");c.is(":disabled")||(n(),v(),a.preventDefault(),a.stopPropagation())});d.up.on("mouseout touchleave touchend touchcancel",function(a){h&&(a.stopPropagation(),g())});d.down.on("mouseout touchleave touchend touchcancel",function(a){h&&(a.stopPropagation(),g())});d.down.on("mousemove touchmove",function(a){h&&(a.stopPropagation(),
a.preventDefault())});d.up.on("mousemove touchmove",function(a){h&&(a.stopPropagation(),a.preventDefault())});f(document).on(r(["mouseup","touchend","touchcancel"],l).join(" "),function(a){h&&(a.preventDefault(),g())});f(document).on(r(["mousemove","touchmove","scroll","scrollstart"],l).join(" "),function(a){h&&(a.preventDefault(),g())});c.on("mousewheel DOMMouseScroll",function(a){if(b.mousewheel&&c.is(":focus")){var d=a.originalEvent.wheelDelta||-a.originalEvent.deltaY||-a.originalEvent.detail;
a.stopPropagation();a.preventDefault();0>d?p():n()}})})();(function(){c.on("touchspin.uponce",function(){g();n()});c.on("touchspin.downonce",function(){g();p()});c.on("touchspin.startupspin",function(){v()});c.on("touchspin.startdownspin",function(){u()});c.on("touchspin.stopspin",function(){g()});c.on("touchspin.updatesettings",function(a,e){b=f.extend({},b,e);e.postfix&&c.parent().find(".bootstrap-touchspin-postfix").text(e.postfix);e.prefix&&c.parent().find(".bootstrap-touchspin-prefix").text(e.prefix);
t();var g=d.input.val();""!==g&&(g=Number(d.input.val()),d.input.val(g.toFixed(b.decimals)))})})();d.input.css("display","block")}else console.log("Must be an input.")})}}})(jQuery);
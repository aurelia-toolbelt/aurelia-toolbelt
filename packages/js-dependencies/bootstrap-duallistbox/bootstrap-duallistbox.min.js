(function(d,F,G,p){function n(a,b){this.element=d(a);this.settings=d.extend({},q,b);this._defaults=q;this._name="bootstrapDualListbox";this.init()}function k(a){a.element.trigger("change")}function r(a){a.element.find("option").each(function(b,h){var e=d(h);"undefined"===typeof e.data("original-index")&&e.data("original-index",a.elementCount++);"undefined"===typeof e.data("_selected")&&e.data("_selected",!1)})}function t(a,b,h){a.element.find("option").each(function(e,c){var g=d(c);g.data("original-index")===
b&&(g.prop("selected",h),h?(g.attr("data-sortindex",a.sortIndex),a.sortIndex++):g.removeAttr("data-sortindex"))})}function l(a,b){return a.replace(/\{(\d+)\}/g,function(a,e){return"undefined"!==typeof b[e]?b[e]:a})}function v(a){if(a.settings.infoText){var b=a.elements.select1.find("option").length,d=a.elements.select2.find("option").length,e=a.element.find("option").length-a.selectedElements,c=a.selectedElements;var f=0===e?a.settings.infoTextEmpty:b===e?l(a.settings.infoText,[b,e]):l(a.settings.infoTextFiltered,
[b,e]);a.elements.info1.html(f);a.elements.box1.toggleClass("filtered",!(b===e||0===e));f=0===c?a.settings.infoTextEmpty:d===c?l(a.settings.infoText,[d,c]):l(a.settings.infoTextFiltered,[d,c]);a.elements.info2.html(f);a.elements.box2.toggleClass("filtered",!(d===c||0===c))}}function c(a){a.selectedElements=0;a.elements.select1.empty();a.elements.select2.empty();a.element.find("option").each(function(b,c){var e=d(c);e.prop("selected")?(a.selectedElements++,a.elements.select2.append(e.clone(!0).prop("selected",
e.data("_selected")))):a.elements.select1.append(e.clone(!0).prop("selected",e.data("_selected")))});a.settings.showFilterInputs&&(m(a,1),m(a,2));v(a)}function m(a,b){if(a.settings.showFilterInputs){f(a,b);a.elements["select"+b].empty().scrollTop(0);var c=new RegExp(d.trim(a.elements["filterInput"+b].val()),"gi"),e=a.element.find("option"),g=a.element;g=1===b?e.not(":selected"):g.find("option:selected");g.each(function(h,f){var g=d(f),u=!0;if(f.text.match(c)||a.settings.filterOnValues&&g.attr("value").match(c))u=
!1,a.elements["select"+b].append(g.clone(!0).prop("selected",g.data("_selected")));e.eq(g.data("original-index")).data("filtered"+b,u)});v(a)}}function f(a,b){var c=a.element.find("option");a.elements["select"+b].find("option").each(function(a,b){var e=d(b);c.eq(e.data("original-index")).data("_selected",e.prop("selected"))})}function w(a){var b=a.children("option");b.sort(function(a,b){var c=parseInt(a.getAttribute("data-sortindex")),e=parseInt(b.getAttribute("data-sortindex"));return c>e?1:c<e?
-1:0});b.detach().appendTo(a)}function x(a){a.find("option").sort(function(a,c){return d(a).data("original-index")>d(c).data("original-index")?1:-1}).appendTo(a)}function B(a){a.elements.select1.find("option").each(function(){a.element.find("option").data("_selected",!1)})}function y(a){"all"!==a.settings.preserveSelectionOnMove||a.settings.moveOnSelect?"moved"!==a.settings.preserveSelectionOnMove||a.settings.moveOnSelect||f(a,1):(f(a,1),f(a,2));a.elements.select1.find("option:selected").each(function(b,
c){var e=d(c);e.data("filtered1")||t(a,e.data("original-index"),!0)});c(a);k(a);a.settings.sortByInputOrder?w(a.elements.select2):x(a.elements.select2)}function z(a){"all"!==a.settings.preserveSelectionOnMove||a.settings.moveOnSelect?"moved"!==a.settings.preserveSelectionOnMove||a.settings.moveOnSelect||f(a,2):(f(a,1),f(a,2));a.elements.select2.find("option:selected").each(function(b,c){var e=d(c);e.data("filtered2")||t(a,e.data("original-index"),!1)});c(a);k(a);x(a.elements.select1);a.settings.sortByInputOrder&&
w(a.elements.select2)}function C(a){"all"!==a.settings.preserveSelectionOnMove||a.settings.moveOnSelect?"moved"!==a.settings.preserveSelectionOnMove||a.settings.moveOnSelect||f(a,1):(f(a,1),f(a,2));a.element.find("option").each(function(b,c){var e=d(c);e.data("filtered1")||(e.prop("selected",!0),e.attr("data-sortindex",a.sortIndex),a.sortIndex++)});c(a);k(a)}function D(a){"all"!==a.settings.preserveSelectionOnMove||a.settings.moveOnSelect?"moved"!==a.settings.preserveSelectionOnMove||a.settings.moveOnSelect||
f(a,2):(f(a,1),f(a,2));a.element.find("option").each(function(a,c){var b=d(c);b.data("filtered2")||(b.prop("selected",!1),b.removeAttr("data-sortindex"))});c(a);k(a)}function E(a){a.elements.form.submit(function(b){a.elements.filterInput1.is(":focus")?(b.preventDefault(),a.elements.filterInput1.focusout()):a.elements.filterInput2.is(":focus")&&(b.preventDefault(),a.elements.filterInput2.focusout())});a.element.on("bootstrapDualListbox.refresh",function(b,c){a.refresh(c)});a.elements.filterClear1.on("click",
function(){a.setNonSelectedFilter("",!0)});a.elements.filterClear2.on("click",function(){a.setSelectedFilter("",!0)});if(!1===a.settings.eventMoveOverride)a.elements.moveButton.on("click",function(){y(a)});if(!1===a.settings.eventMoveAllOverride)a.elements.moveAllButton.on("click",function(){C(a)});if(!1===a.settings.eventRemoveOverride)a.elements.removeButton.on("click",function(){z(a)});if(!1===a.settings.eventRemoveAllOverride)a.elements.removeAllButton.on("click",function(){D(a)});a.elements.filterInput1.on("change keyup",
function(){m(a,1)});a.elements.filterInput2.on("change keyup",function(){m(a,2)})}var q={bootstrap2Compatible:!1,filterTextClear:"show all",filterPlaceHolder:"Filter",moveSelectedLabel:"Move selected",moveAllLabel:"Move all",removeSelectedLabel:"Remove selected",removeAllLabel:"Remove all",moveOnSelect:!0,preserveSelectionOnMove:!1,selectedListLabel:!1,nonSelectedListLabel:!1,helperSelectNamePostfix:"_helper",selectorMinimalHeight:100,showFilterInputs:!0,nonSelectedFilter:"",selectedFilter:"",infoText:"Showing all {0}",
infoTextFiltered:'<span class="label label-warning">Filtered</span> {0} from {1}',infoTextEmpty:"Empty list",filterOnValues:!1,sortByInputOrder:!1,eventMoveOverride:!1,eventMoveAllOverride:!1,eventRemoveOverride:!1,eventRemoveAllOverride:!1},A=/android/i.test(navigator.userAgent.toLowerCase());n.prototype={init:function(){this.container=d('<div class="bootstrap-duallistbox-container"> <div class="box1">   <label></label>   <span class="info-container">     <span class="info"></span>     <button type="button" class="btn clear1 pull-right"></button>   </span>   <input class="filter" type="text">   <div class="btn-group buttons">     <button type="button" class="btn moveall">       <i></i>       <i></i>     </button>     <button type="button" class="btn move">       <i></i>     </button>   </div>   <select multiple="multiple"></select> </div> <div class="box2">   <label></label>   <span class="info-container">     <span class="info"></span>     <button type="button" class="btn clear2 pull-right"></button>   </span>   <input class="filter" type="text">   <div class="btn-group buttons">     <button type="button" class="btn remove">       <i></i>     </button>     <button type="button" class="btn removeall">       <i></i>       <i></i>     </button>   </div>   <select multiple="multiple"></select> </div></div>').insertBefore(this.element);
this.elements={originalSelect:this.element,box1:d(".box1",this.container),box2:d(".box2",this.container),filterInput1:d(".box1 .filter",this.container),filterInput2:d(".box2 .filter",this.container),filterClear1:d(".box1 .clear1",this.container),filterClear2:d(".box2 .clear2",this.container),label1:d(".box1 > label",this.container),label2:d(".box2 > label",this.container),info1:d(".box1 .info",this.container),info2:d(".box2 .info",this.container),select1:d(".box1 select",this.container),select2:d(".box2 select",
this.container),moveButton:d(".box1 .move",this.container),removeButton:d(".box2 .remove",this.container),moveAllButton:d(".box1 .moveall",this.container),removeAllButton:d(".box2 .removeall",this.container),form:d(d(".box1 .filter",this.container)[0].form)};this.originalSelectName=this.element.attr("name")||"";var a="bootstrap-duallistbox-nonselected-list_"+this.originalSelectName,b="bootstrap-duallistbox-selected-list_"+this.originalSelectName;this.elements.select1.attr("id",a);this.elements.select2.attr("id",
b);this.elements.label1.attr("for",a);this.elements.label2.attr("for",b);this.elementCount=this.sortIndex=this.selectedElements=0;this.setBootstrap2Compatible(this.settings.bootstrap2Compatible);this.setFilterTextClear(this.settings.filterTextClear);this.setFilterPlaceHolder(this.settings.filterPlaceHolder);this.setMoveSelectedLabel(this.settings.moveSelectedLabel);this.setMoveAllLabel(this.settings.moveAllLabel);this.setRemoveSelectedLabel(this.settings.removeSelectedLabel);this.setRemoveAllLabel(this.settings.removeAllLabel);
this.setMoveOnSelect(this.settings.moveOnSelect);this.setPreserveSelectionOnMove(this.settings.preserveSelectionOnMove);this.setSelectedListLabel(this.settings.selectedListLabel);this.setNonSelectedListLabel(this.settings.nonSelectedListLabel);this.setHelperSelectNamePostfix(this.settings.helperSelectNamePostfix);this.setSelectOrMinimalHeight(this.settings.selectorMinimalHeight);r(this);this.setShowFilterInputs(this.settings.showFilterInputs);this.setNonSelectedFilter(this.settings.nonSelectedFilter);
this.setSelectedFilter(this.settings.selectedFilter);this.setInfoText(this.settings.infoText);this.setInfoTextFiltered(this.settings.infoTextFiltered);this.setInfoTextEmpty(this.settings.infoTextEmpty);this.setFilterOnValues(this.settings.filterOnValues);this.setSortByInputOrder(this.settings.sortByInputOrder);this.setEventMoveOverride(this.settings.eventMoveOverride);this.setEventMoveAllOverride(this.settings.eventMoveAllOverride);this.setEventRemoveOverride(this.settings.eventRemoveOverride);this.setEventRemoveAllOverride(this.settings.eventRemoveAllOverride);
this.element.hide();E(this);c(this);return this.element},setBootstrap2Compatible:function(a,b){(this.settings.bootstrap2Compatible=a)?(this.container.removeClass("row").addClass("row-fluid bs2compatible"),this.container.find(".box1, .box2").removeClass("col-md-6").addClass("span6"),this.container.find(".clear1, .clear2").removeClass("btn-primary btn-xs").addClass("btn-mini"),this.container.find("input, select").removeClass("form-control"),this.container.find(".btn").removeClass("btn-primary"),this.container.find(".moveall > i, .move > i").removeClass("fa fa-arrow-right").addClass("icon-arrow-right"),
this.container.find(".removeall > i, .remove > i").removeClass("fa fa-arrow-left").addClass("icon-arrow-left")):(this.container.removeClass("row-fluid bs2compatible").addClass("row"),this.container.find(".box1, .box2").removeClass("span6").addClass("col-md-6"),this.container.find(".clear1, .clear2").removeClass("btn-mini").addClass("btn-primary btn-xs"),this.container.find("input, select").addClass("form-control"),this.container.find(".btn").addClass("btn-primary"),this.container.find(".moveall > i, .move > i").removeClass("icon-arrow-right").addClass("fa fa-arrow-right"),
this.container.find(".removeall > i, .remove > i").removeClass("icon-arrow-left").addClass("fa fa-arrow-left"));b&&c(this);return this.element},setFilterTextClear:function(a,b){this.settings.filterTextClear=a;this.elements.filterClear1.html(a);this.elements.filterClear2.html(a);b&&c(this);return this.element},setFilterPlaceHolder:function(a,b){this.settings.filterPlaceHolder=a;this.elements.filterInput1.attr("placeholder",a);this.elements.filterInput2.attr("placeholder",a);b&&c(this);return this.element},
setMoveSelectedLabel:function(a,b){this.settings.moveSelectedLabel=a;this.elements.moveButton.attr("title",a);b&&c(this);return this.element},setMoveAllLabel:function(a,b){this.settings.moveAllLabel=a;this.elements.moveAllButton.attr("title",a);b&&c(this);return this.element},setRemoveSelectedLabel:function(a,b){this.settings.removeSelectedLabel=a;this.elements.removeButton.attr("title",a);b&&c(this);return this.element},setRemoveAllLabel:function(a,b){this.settings.removeAllLabel=a;this.elements.removeAllButton.attr("title",
a);b&&c(this);return this.element},setMoveOnSelect:function(a,b){A&&(a=!0);this.settings.moveOnSelect=a;if(this.settings.moveOnSelect){this.container.addClass("moveonselect");var d=this;this.elements.select1.on("change",function(){y(d)});this.elements.select2.on("change",function(){z(d)})}else this.container.removeClass("moveonselect"),this.elements.select1.off("change"),this.elements.select2.off("change");b&&c(this);return this.element},setPreserveSelectionOnMove:function(a,b){A&&(a=!1);this.settings.preserveSelectionOnMove=
a;b&&c(this);return this.element},setSelectedListLabel:function(a,b){(this.settings.selectedListLabel=a)?this.elements.label2.show().html(a):this.elements.label2.hide().html(a);b&&c(this);return this.element},setNonSelectedListLabel:function(a,b){(this.settings.nonSelectedListLabel=a)?this.elements.label1.show().html(a):this.elements.label1.hide().html(a);b&&c(this);return this.element},setHelperSelectNamePostfix:function(a,b){(this.settings.helperSelectNamePostfix=a)?(this.elements.select1.attr("name",
this.originalSelectName+a+"1"),this.elements.select2.attr("name",this.originalSelectName+a+"2")):(this.elements.select1.removeAttr("name"),this.elements.select2.removeAttr("name"));b&&c(this);return this.element},setSelectOrMinimalHeight:function(a,b){this.settings.selectorMinimalHeight=a;var d=this.element.height();this.element.height()<a&&(d=a);this.elements.select1.height(d);this.elements.select2.height(d);b&&c(this);return this.element},setShowFilterInputs:function(a,b){a?(this.elements.filterInput1.show(),
this.elements.filterInput2.show()):(this.setNonSelectedFilter(""),this.setSelectedFilter(""),c(this),this.elements.filterInput1.hide(),this.elements.filterInput2.hide());this.settings.showFilterInputs=a;b&&c(this);return this.element},setNonSelectedFilter:function(a,b){if(this.settings.showFilterInputs)return this.settings.nonSelectedFilter=a,this.elements.filterInput1.val(a),b&&c(this),this.element},setSelectedFilter:function(a,b){if(this.settings.showFilterInputs)return this.settings.selectedFilter=
a,this.elements.filterInput2.val(a),b&&c(this),this.element},setInfoText:function(a,b){this.settings.infoText=a;b&&c(this);return this.element},setInfoTextFiltered:function(a,b){this.settings.infoTextFiltered=a;b&&c(this);return this.element},setInfoTextEmpty:function(a,b){this.settings.infoTextEmpty=a;b&&c(this);return this.element},setFilterOnValues:function(a,b){this.settings.filterOnValues=a;b&&c(this);return this.element},setSortByInputOrder:function(a,b){this.settings.sortByInputOrder=a;b&&
c(this);return this.element},setEventMoveOverride:function(a,b){this.settings.eventMoveOverride=a;b&&c(this);return this.element},setEventMoveAllOverride:function(a,b){this.settings.eventMoveAllOverride=a;b&&c(this);return this.element},setEventRemoveOverride:function(a,b){this.settings.eventRemoveOverride=a;b&&c(this);return this.element},setEventRemoveAllOverride:function(a,b){this.settings.eventRemoveAllOverride=a;b&&c(this);return this.element},getContainer:function(){return this.container},refresh:function(a){r(this);
a?B(this):(f(this,1),f(this,2));c(this)},destroy:function(){this.container.remove();this.element.show();d.data(this,"plugin_bootstrapDualListbox",null);return this.element}};d.fn.bootstrapDualListbox=function(a){var b=arguments;if(a===p||"object"===typeof a)return this.each(function(){d(this).is("select")?d.data(this,"plugin_bootstrapDualListbox")||d.data(this,"plugin_bootstrapDualListbox",new n(this,a)):d(this).find("select").each(function(b,c){d(c).bootstrapDualListbox(a)})});if("string"===typeof a&&
"_"!==a[0]&&"init"!==a){var c;this.each(function(){var e=d.data(this,"plugin_bootstrapDualListbox");e instanceof n&&"function"===typeof e[a]&&(c=e[a].apply(e,Array.prototype.slice.call(b,1)))});return c!==p?c:this}}})(jQuery,window,document);
(function(g){g.event.special.destroyed||(g.event.special.destroyed={remove:function(c){c.handler&&c.handler()}});g.fn.extend({maxlength:function(c,l){function t(c){return(c=c.charCodeAt())?128>c?1:2048>c?2:3:0}function u(c){return c.split("").map(t).concat(0).reduce(function(a,b){return a+b})}function q(d){d=d.val();d=c.twoCharLinebreak?d.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"):d.replace(RegExp("\r?\n","g"),"\n");return c.utf8?u(d):d.length}function w(c,a){return a-q(c)}function m(c,a){a.css({display:"block"});
c.trigger("maxlength.shown")}function p(d,a,b){var e="";c.message?e="function"===typeof c.message?c.message(d,a):c.message.replace("%charsTyped%",b).replace("%charsRemaining%",a-b).replace("%charsTotal%",a):(c.preText&&(e+=c.preText),e=c.showCharsTyped?e+b:e+(a-b),c.showMaxLength&&(e+=c.separator+a),c.postText&&(e+=c.postText));return e}function v(d,a,b,e){if(e)if(e.html(p(a.val(),b,b-d)),0<d){var h=c.threshold,k=!0;!c.alwaysShow&&b-q(a)>h&&(k=!1);k?m(a,e.removeClass(c.limitReachedClass).addClass(c.warningClass)):
c.alwaysShow||(e.css({display:"none"}),a.trigger("maxlength.hidden"))}else m(a,e.removeClass(c.warningClass).addClass(c.limitReachedClass));c.customMaxAttribute&&(0>d?a.addClass("overmax"):a.removeClass("overmax"))}function x(d,a){if(d&&a){var b={};g.each(["top","bottom","left","right","position"],function(a,d){var e=c.placement[d];"undefined"!==typeof e&&(b[d]=e)});a.css(b)}}function n(d,a){var b=d[0];b=g.extend({},"function"===typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,
height:b.offsetHeight},d.offset());if("function"===g.type(c.placement))c.placement(d,a,b);else if(g.isPlainObject(c.placement))x(c.placement,a);else{var e=d.outerWidth(),h=a.outerWidth(),k=a.width(),f=a.height();c.appendToParent&&(b.top-=d.parent().offset().top,b.left-=d.parent().offset().left);switch(c.placement){case "bottom":a.css({top:b.top+b.height,left:b.left+b.width/2-k/2});break;case "top":a.css({top:b.top-f,left:b.left+b.width/2-k/2});break;case "left":a.css({top:b.top+b.height/2-f/2,left:b.left-
k});break;case "right":a.css({top:b.top+b.height/2-f/2,left:b.left+b.width});break;case "bottom-right":a.css({top:b.top+b.height,left:b.left+b.width});break;case "top-right":a.css({top:b.top-f,left:b.left+e});break;case "top-left":a.css({top:b.top-f,left:b.left-h});break;case "bottom-left":a.css({top:b.top+d.outerHeight(),left:b.left-h});break;case "centered-right":a.css({top:b.top+f/2,left:b.left+e-h-3});break;case "bottom-right-inside":a.css({top:b.top+b.height,left:b.left+b.width-h});break;case "top-right-inside":a.css({top:b.top-
f,left:b.left+e-h});break;case "top-left-inside":a.css({top:b.top-f,left:b.left});break;case "bottom-left-inside":a.css({top:b.top+d.outerHeight(),left:b.left})}}}function r(d){var a=d.attr("maxlength")||c.customMaxAttribute;if(c.customMaxAttribute&&!c.allowOverMax){var b=d.attr(c.customMaxAttribute);if(!a||b<a)a=b}a||(a=d.attr("size"));return a}var y=g("body");g.isFunction(c)&&!l&&(l=c,c={});c=g.extend({showOnReady:!1,alwaysShow:!1,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-important label-danger",
separator:" / ",preText:"",postText:"",showMaxLength:!0,placement:"bottom",message:null,showCharsTyped:!0,validate:!1,utf8:!1,appendToParent:!1,twoCharLinebreak:!0,customMaxAttribute:null,allowOverMax:!1},c);return this.each(function(){function d(){var d=p(a.val(),b,"0");b=r(a);e||(e=g('<span class="bootstrap-maxlength"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}).html(d));a.is("textarea")&&(a.data("maxlenghtsizex",a.outerWidth()),a.data("maxlenghtsizey",a.outerHeight()),
a.mouseup(function(){a.outerWidth()===a.data("maxlenghtsizex")&&a.outerHeight()===a.data("maxlenghtsizey")||n(a,e);a.data("maxlenghtsizex",a.outerWidth());a.data("maxlenghtsizey",a.outerHeight())}));c.appendToParent?(a.parent().append(e),a.parent().css("position","relative")):y.append(e);d=w(a,r(a));v(d,a,b,e);n(a,e)}var a=g(this),b,e;g(window).resize(function(){e&&n(a,e)});c.showOnReady?a.ready(function(){d()}):a.focus(function(){d()});a.on("maxlength.reposition",function(){n(a,e)});a.on("destroyed",
function(){e&&e.remove()});a.on("blur",function(){e&&!c.showOnReady&&e.remove()});a.on("input",function(){var d=r(a),g=d-q(a),f=!0;if(c.validate&&0>g){g=a;f=g.val();c.twoCharLinebreak&&(f=f.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"),"\n"===f[f.length-1]&&(d-=f.length%2));if(c.utf8){for(var l=f.split("").map(t),m=0,p=u(f)-d;m<p;m+=l.pop());d-=d-l.length}g.val(f.substr(0,d));f=!1}else v(g,a,b,e);("bottom-right-inside"===c.placement||"top-right-inside"===c.placement||"function"===typeof c.placement||c.message&&
"function"===typeof c.message)&&n(a,e);return f})})}})})(jQuery);
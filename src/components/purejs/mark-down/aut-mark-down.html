<template>

  <require from="../../bootstrap/toggle/aut-toggle"></require>
  <require from="../../../value-converters/purejs/mark-down/markdown-vc"></require>
  <require from="../../../custom-attributes/jquery/block-ui/aut-block-ui"></require>

  <div class="card" aut-block-ui='block.bind:isLoading;message:"Loading ... ";css:{"background-color":"maroon"; color:goldenrod;}'>
    <div class="card-header" if.bind="showToolBar">

      <i class="fa fa-spinner fa-2x" show.bind="isLoading">

      </i>

      <div class="btn-group btn-group-sm" role="group">
        <button click.delegate="addText('# ')" type="button" class="btn btn-outline-primary">h1</button>
        <button click.delegate="addText('## ')" type="button" class="btn btn-outline-primary">h2</button>
        <button click.delegate="addText('### ')" type="button" class="btn btn-outline-primary">h3</button>
        <button click.delegate="addText('### ')" type="button" class="btn btn-outline-primary">h4</button>
        <button click.delegate="addText('#### ')" type="button" class="btn btn-outline-primary">h5</button>
      </div>

      <div class="btn-group btn-group-sm" role="group">
        <button type="button" class="btn btn-outline-dark" click.delegate="addText('****', 2)">
          <b>Bold</b>
        </button>
        <button type="button" class="btn btn-outline-dark" click.delegate="addText('__', 1)">
          <em>Italic</em>
        </button>
      </div>

      <div class="btn-group btn-group-sm" role="group">
        <button type="button" class="btn btn-outline-secondary" click.delegate="addText('[]()', 1)">
          <b>Link</b>
        </button>
        <button type="button" class="btn btn-outline-secondary" click.delegate="addText('![]()', 4)">
          <em>Image</em>
        </button>
      </div>


      <div class="pull-right">
        <aut-toggle size="small" checked.bind="showPreview">
          Preview
        </aut-toggle>
        <aut-toggle size="small" checked.bind="showEditor">
          Editor
        </aut-toggle>
      </div>
    </div>
    <div class="card-body" if.bind="showEditor === true" style="border-left: 3px solid maroon !important;">

      <textarea ref="editor" class="editor" style="
                  width: 98%;
                  border: 0px;
                  min-height: 400px;" value.bind="myText" contenteditable="true">
      </textarea>

    </div>
    <div class="card-footer" if.bind="showPreview === true" if.bind="showPreview === true">
      <div ref="preview" innerhtml.bind="myText | md & debounce:1000">
      </div>
    </div>
  </div>
</template>
